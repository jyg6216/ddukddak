<%@ page language="java" contentType="text/html; charset=UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<script type="text/javascript" src="/resources/js/jquery.min.js"></script>
<style>
/* 1592 */
.left-div{
	width: 492px;
}
.right-div{
	width: 1084px;
}
.order{
	font-size: 1.5em;
	background-color: fuchsia;
}
.inventory{
	font-size: 1.5em;
	background-color: lime;
}
.search{
	background-image: url(/resources/images/Search.png);
	background-repeat: no-repeat;
	background-position: 280px center;
	width: 312px;
	height: 36px;
	margin-left: 8px;
}
.container {
	display: flex;
	justify-content: space-between;
}
th{
	font-size:1.2em;
}
.inyn{
	text-align: center;
}
</style>
<body>
	<div class="dduk-body-border right-div">
		<div class="dduk-row" style="margin-bottom: 5px;">
			<div class="order">발주 리스트</div>
			<div class="inventory">재고현황</div>
			<input type="text" class="dduck-input search" id="search"/>
		</div>
		<div class="card-body table-responsive p-0" style="height: 780px;">
	           <table class="table table-head-fixed text-nowrap"  id="inventory-table">
				<thead style="position:sticky; top: 0;  background-color: #fff;">
					<tr class="tr-padding">
						<th><input type="checkbox" id="check-all-item"/> 전체</th>
						<th>코드</th>
						<th>분류</th>
						<th>약품명</th>
						<th>제조사</th>
						<th>상세</th>
						<th>함량</th>
						<th>재고</th>
						<th>가격</th>
						<th>보험적용</th>
					</tr>
				</thead>
				
				<tbody>
					<c:forEach var="medicine" items="${medicineVOList}">
					<tr>
						<td><input type="checkbox" class="inventory-check"/></td>
						<td>${medicine.mediCd}</td>
						<td>${medicine.mediType}</td>
						<td>${medicine.mediNm}</td>
						<td>${medicine.mediMaker}</td>
						<td>${medicine.mediDetail}</td>
						<td>${medicine.mediCont}</td>
						<td>${medicine.mediStock}</td>
						<td>${medicine.mediPrice}</td>
						<c:choose>
							<c:when test="${medicine.insuYn=='INYN01'}">
								<td class="inyn">O</td>
							</c:when>
							<c:otherwise>
								<td class="inyn">X</td>
							</c:otherwise>
						</c:choose>
					</tr>
					</c:forEach>
				</tbody>
			</table>
		</div>
	</div>
	
	<div class="dduk-body-border left-div">
		<div class="container">
		<h1>발주서</h1><button class="dduk-btn-active" style="margin-bottom: 5px;">신청</button>
		</div>
		 <div class="card-body table-responsive p-0" style="height: 320px;">
	           <table class="table table-head-fixed text-nowrap" id="order-table">
				<thead style="position:sticky; top: 0;  background-color: #fff;">
					<tr class="tr-padding">
						<th><input type="checkbox" /> 전체</th>
						<th>코드</th>
						<th>약품명</th>
						<th>제조사</th>
						<th>수량</th>
						<th>가격</th>
					</tr>
				</thead>
				
				<tbody>
<!-- 					<tr> -->
<!-- 						<td>발</td> id="check-all-order"-->
<!-- 						<td>주</td> -->
<!-- 						<td>다</td> -->
<!-- 						<td>ㅎ</td> -->
<!-- 						<td>ㅎ</td> -->
<!-- 						<td>ㅎ</td> -->
<!-- 					</tr> -->
				</tbody>
			</table>
		</div>
	</div>
<script>
//전체 체크박스를 체크하면 아래 항목들 모두 체크되기
document.getElementById('check-all-item').addEventListener('change',function(){
	//inventory check 클래스 요소를 변수에 담기 (HTML Collection 형태라서 포문써야됨)
	let inventoryChecks = document.getElementsByClassName('inventory-check');
	//옮길 table 요소 변수에 담기
	let orderTable = document.getElementById('order-table');
	
	for(let i = 0; i < inventoryChecks.length; i++){
		//checked 속성을 true로 키면 체크가 된다
		inventoryChecks[i].checked = true;
		console.log(inventoryChecks.length);
	}
	
	for(let i = 0; i < inventoryChecks.length; i++){
		//옮길 테이블에 붙히기
		orderTable.appendChild(inventoryChecks[i].closest('tr'));
	}
});
</script>
</body>

