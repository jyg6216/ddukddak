package kr.or.dduk.clinic.controller;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;

import kr.or.dduk.clinic.service.ClinicService;
import kr.or.dduk.vo.ClinicChartVO;
import kr.or.dduk.vo.PatientVO;
import lombok.extern.slf4j.Slf4j;

/**
 * 의사 진료 컨트롤러
 * @author 김영남
 */
@Slf4j
@Controller
@RequestMapping("/clinic")
public class ClinicController {

	
	@Autowired
	ClinicService clinicService;
	
	
	/**
	 * 진료화면 이동
	 * @return
	 */
	@GetMapping("/chart")
	public String chart() {
		return "clinic/chart";
	}
	
	
	/**
	 * 특정 환자의 진료정보들을 간략하게 가져오는 메서드
	 * 환자정보 클릭시 해당환자의 진료목록을 가져오기 위한 메서드
	 * @param paNo 환자번호
	 */
	@ResponseBody
	@PostMapping("/simpleClinicChartList")
	public PatientVO simpleClinicChartList(String paNo){
		PatientVO patientVO = this.clinicService.simpleClinicChartList(paNo);
		return patientVO;
	}
	
	
	/**
	 * 특정 진료의 정보를 자세히 가져오는 메서드
	 * 환자의 진료목록에서 특정 진료를 클릭 시 해당 진료의 정보를 자세히 화면에 출력시켜주기 위한 메서드
	 * @param clinicNo 진료번호
	 */
	@ResponseBody
	@PostMapping("/clinicChartDetail")
	public ClinicChartVO clinicChartDetail(String clinicNo) {
		log.info("컨트롤러에서 진료번호 받음? : " + clinicNo);
		ClinicChartVO clinicChartVO = this.clinicService.clinicChartDetail(clinicNo);
		log.info("컨트롤러에서 진료자세한정보 받음? : " + clinicChartVO);
		return clinicChartVO;
	}
}
