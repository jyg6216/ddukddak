<%@ page language="java" contentType="text/html; charset=UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>

<style>
.rounds-left {
	width: 30%;
}

.rounds-right-wrap {
	margin-left: 0.5%;
	display: flex;
    gap: 24px;
}

.rounds-chart {
	width: 700px;
}

.rounds-chart-head {
	margin: -16px -16px 0px -16px;
    padding: 16px 24px 8px 24px;
    border-bottom: 1px solid #EBEFF0;
}

.rounds-chart-body-top {
	padding-top: 16px;
}

.rounds-chart-body-cont {

}

.rounds-chart-list {
	height: 693px;
    width: 155px;
    margin: 17px -16px -16px -16px;
    padding: 16px;
    border-right: 1px solid var(--border, #EBEFF0);
}

.rounds-chart-list-date {
	text-align: center;
	width: 120px;
	padding: 5px;
}

.rounds-chart-list-date:hover {
	background-color: #F8F9FC;
} 

.rounds-chart-detail {
    width: 543px;
    height: 693px;
    background: var(--bg-01, #F8F9FC);
    margin: 17px -17px -16px 16px;
    padding: 16px;
    border-radius: 0px 0px 24px 0px;
}

.rounds-chart-detail-inner-border {
	height: 624px;
    border-radius: 24px;
    border: 1px solid var(--border, #E0E8E6);
    padding: 16px;
    background: var(--white, #FFF);
    overflow-y: scroll;
}

.nurse-chart {
	width: 300px;
}

.nurse-chart-head {
	margin: -16px -16px 0px -16px;
    padding: 16px 24px 8px 24px;
    border-bottom: 1px solid #EBEFF0;
}

.dduk-title-area {
	margin-bottom: 0px;
}

.in-h2 {
	font-size: 14px !important;
}

.rounds-patient-history {
	height: 539px;
}

.rounds-tab-wrap {
	display: flex;
    gap: 24px;
    justify-content: space-evenly;
}

.rounds-tab {
	margin-top: 32px;
    border-top-right-radius: 18px;
    border-top-left-radius: 18px;
    border: 1px solid var(--border, #E0E8E6);
    border-bottom: none;
    padding: 16px;
    background: var(--white, #FFF);
    width: 35%;
    padding: 4px;
    text-align: center;
    color: #000;
    cursor: pointer;
}

.tab-active {
	background-color: #F8F9FC;
	color: #8D9EA5;
	font-family: 'Pretendard5';
}

.clinic-history-list {
    display: flex;
    overflow-x: scroll;
	white-space: nowrap;
	padding-bottom: 16px;
}

.clinic-history-head {
	display: flex;
	border-radius: 10px;
    border: 1px solid var(--border, #E0E8E6);
    padding: 8px;
    width: 150px;
    height: 80px;
    flex-shrink: 0;
    flex-direction: column;
}

.calendar-wrap {
	display: flex;
    gap: 24px;
    justify-content: space-evenly;
}

::-webkit-scrollbar {
    height: 8px;
}

.history-btn {
	width: 12px;
}

.neon-text {
  color: #0ABAB5; /* 텍스트 색상 */
  text-shadow:
    0 0 5px #DBF2F4, /* 바깥쪽 발광 효과 */
}
 
/* 커서 올리기, 클릭 시 색깔바꾸기 시작 */
.clinic-history-head:hover {
	background-color: #F8F9FC
} 
 
.selected {
	background-color: #EDF8F9;
}
/* 커서 올리기, 클릭 시 색깔바꾸기 끝 */

.clinic-history-body-scroll {
	height: 400px;
	overflow-x: hidden;
	overflow-y: scroll;
	padding: 16px;
}

.table-clinic-history {
	display: flex;
	padding: 12px 16px;
	flex-direction: column;
	justify-content: center;
	gap: 4px;
	border-radius: 12px;
	background: var(--bg-01, #F8F9FC);
	width: 380px;
	height: auto;
	margin-bottom: 16px;
}

.textarea-clinic-history-injnm {
	resize: none;
	width: 90%;
	height: 50px;
}

.textarea-clinic-history-opinion {
	resize: none;
	width: 90%;
	height: 150px;
}

.date-wrap {
	display: flex;
	flex-direction: column;
	margin: 3px 0px 0px -10px;
}

textarea {
	resize: none;
}

#clinicOpinion {
	width: 475px;
    height: 150px;
}

/* 오더추가 시작 */
.rounds-table{
	width: 100%;
}
.td-padding {
    padding: 10px 0px 10px 5px;
}
.tr-column {
    background: #F8F9FC;
}
.medicine-order-day, .medicine-order-per, .medicine-order-dose {
	width: 20px;
	height: 20px;
	margin-right: 5px;
}
.medicine-order-qt {
	width: 25px;
	height: 20px;
	margin-right: 5px;
}
input[type=number] {
  -moz-appearance: textfield;
}
/* 오더추가 끝 */

/* 아이콘 모음 시작 */
.icon-calendar {
	width: 48px;
	height: 48px;
}
.icon-stethoscope {
	width: 42px;
	height: 42px;
}
.icon-undo {
	width: 24px;
	height: 24px;
    margin: 4px 0px 0px 559px;
    cursor: pointer;
}
#createRoundsChart {
	margin-left: 50px;
}
.icon-trashbin {
	width: 16px;
	height: 16px;
	margin-top: 4px;
	cursor: pointer;
}
/* 아이콘 모음 끝 */
</style>

<div class="dduk-body-border rounds-left">
	<div class="dduk-inner-border">
		<div class="dduk-title-area">
			<h2>환자 정보 조회</h2>
		</div>
		<div class="patient-info-div">
			<div class="dduk-row">
				<h2 class="in-h2" style="width:50%">이름 : </h2>
				<h2 class="in-h2" style="width:30%">성별 : </h2>
				<h2 class="in-h2" style="width:30%">나이 : </h2>
			</div>
			<div class="dduk-row">
				<h2 class="in-h2" style="width:35%">보호자 이름 : </h2>
				<h2 class="in-h2" style="width:65%">보호자 번호 : </h2>
			</div>
			<div class="dduk-row">
				<h2 class="in-h2" style="width:33%">혈액행 : </h2>
				<h2 class="in-h2" style="width:33%">키 : </h2>
				<h2 class="in-h2" style="width:33%">몸무게 : </h2>
			</div>
		</div>
	</div>
	<div class="dduk-row rounds-tab-wrap">
		<div class="rounds-tab" id="clinicHistory">진료내역</div>
		<div class="rounds-tab tab-active" id="admissionHistory">입원내역</div>
	</div>
	<div class="dduk-inner-border rounds-patient-history">
		<div class="dduk-row clinic-history-list">
			<div class="clinic-history-head">
				<div class="dduk-row">2023-11-20</div>
				<div class="dduk-row">담당의 : 김영남</div>
				<div class="dduk-row">
					<span class="history-btn"><span class="neon-text">진료</span></span>
					<span class="history-btn">검사</span>
					<span class="history-btn"><span class="neon-text">치료</span></span>
					<span class="history-btn">처방</span>
				</div>
			</div>
			<div class="clinic-history-head">
				<div class="dduk-row">2023-01-15</div>
				<div class="dduk-row">담당의 : 김영남</div>
				<div class="dduk-row">
					<span class="history-btn"><span class="neon-text">진료</span></span>
					<span class="history-btn">검사</span>
					<span class="history-btn"><span class="neon-text">치료</span></span>
					<span class="history-btn">처방</span>
				</div>
			</div>
			<div class="clinic-history-head">
				<div class="dduk-row">2023-11-20</div>
				<div class="dduk-row">담당의 : 김영남</div>
				<div class="dduk-row">
					<span class="history-btn"><span class="neon-text">진료</span></span>
					<span class="history-btn">검사</span>
					<span class="history-btn"><span class="neon-text">치료</span></span>
					<span class="history-btn">처방</span>
				</div>
			</div>
			<div class="clinic-history-head"></div>
			<div class="clinic-history-head"></div>
		</div>

		<div class="clinic-history-body-scroll">
		
			<h4>진단명</h4>
			<textarea class="dduck-input textarea-clinic-history-injnm" readonly="readonly"></textarea>
			<br><br>
			
			<h4>소견</h4>
			<textarea class="dduck-input textarea-clinic-history-opinion" readonly="readonly"></textarea>
			<br><br>
		
			<h4>진단</h4>
			<div class="table-clinic-history">
				<table>
					<thead>
						<tr>
							<th class="gray-text" style="width: 15%">분류</th>
							<th class="gray-text" style="width: 40%">상병명</th>
							<th class="gray-text" style="width: 30%">발병일</th>
							<th class="gray-text" style="width: 15%">환부</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>주</td>
							<td>진짜뒤지게아픈병</td>
							<td>2023-11-15</td>
							<td>무릎</td>
						</tr>
						<tr>
							<td>주</td>
							<td>진짜뒤지게아픈병</td>
							<td>2023-11-15</td>
							<td>무릎</td>
						</tr>
						<tr>
							<td>주</td>
							<td>진짜뒤지게아픈병</td>
							<td>2023-11-15</td>
							<td>무릎</td>
						</tr>
					</tbody>
				</table>
			</div>
			<br>
			
			<h4>검사</h4>
			<div class="table-clinic-history">
				<table>
					<thead>
						<tr>
							<th class="gray-text" style="width: 25%">검사명</th>
							<th class="gray-text" style="width: 60%">검사결과</th>
							<th class="gray-text" style="width: 15%">환부</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>X-RAY</td>
							<td>진짜엄청큰일남</td>
							<td>무릎</td>
						</tr>
					</tbody>
				</table>
			</div>
			<br>
			
			<h4>처방</h4>
			<div class="table-clinic-history">
				<table>
					<thead>
						<tr>
							<th class="gray-text w-25">이름</th>
							<th class="gray-text w-60">약품상세</th>
							<th class="gray-text w-15">처방량</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>어쩌구약</td>
							<td>진짜개맛있는약</td>
							<td>20일분</td>
						</tr>
					</tbody>
				</table>
			</div>
			<br>
			
			<h4>치료</h4>
			<div class="table-clinic-history">
				<table>
					<thead>
						<tr>
							<th class="gray-text w-20">치료명</th>
							<th class="gray-text w-65">치료기록</th>
							<th class="gray-text w-15">환부</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>재미있는치료 5</td>
							<td>진짜엄청치료가잘돼서기분이너무좋음ㅋㅋㅋㅋㅋ 20</td>
							<td>무릎</td>
						</tr>
					</tbody>
				</table>
			</div>
			<br>
			
		</div>
	</div>
</div>
<div class="rounds-right-wrap">
	<div class="dduk-body-border rounds-chart">
		<div class="dduk-title-area rounds-chart-head">
			<div class="d-flex">
				<h2>회진 차트</h2>
				<img class="icon-undo" src="/resources/images/icons/undo.png">
			</div>
		</div>
		<div class="rounds-chart-body-top">
			<div class="calendar-wrap">
				
				<div class="dduk-row">
					<img class="icon-stethoscope" src="/resources/images/icons/stethoscope.png">
					<div class="date-wrap">
						<div>담당의사</div>
						<div>김영남</div>
					</div>
				</div>
			
				<div class="dduk-row">
					<img class="icon-calendar" src="/resources/images/icons/calendar.png">
					<div class="date-wrap">
						<div>입원일</div>
						<div>2023-11-10</div>
					</div>
				</div>
				
				<div class="dduk-row">
					<img class="icon-calendar" src="/resources/images/icons/calendar.png">
					<div class="date-wrap">
						<div>퇴원예정일</div>
						<div>2023-11-11</div>
					</div>
				</div>
				
			</div>
		</div>
		<div class="d-flex rounds-chart-body-cont">
			<div class="rounds-chart-list">
				<div class="rounds-chart-list-date">2021-05-07</div>
				<div class="rounds-chart-list-date">2021-05-07</div>
				<div class="rounds-chart-list-date">2021-05-07</div>
				<div class="rounds-chart-list-date">2021-05-07</div>
				<div class="rounds-chart-list-date">2021-05-07</div>
				<svg id="createRoundsChart" type="button" data-bs-toggle="modal" data-bs-target="#createOrdersetModal" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
					<g clip-path="url(#clip0_142_1638)">
					<path d="M18 13H13V18C13 18.55 12.55 19 12 19C11.45 19 11 18.55 11 18V13H6C5.45 13 5 12.55 5 12C5 11.45 5.45 11 6 11H11V6C11 5.45 11.45 5 12 5C12.55 5 13 5.45 13 6V11H18C18.55 11 19 11.45 19 12C19 12.55 18.55 13 18 13Z" fill="#8D9EA5"></path>
					</g>
					<defs>
					<clipPath id="clip0_142_1638">
					<rect width="24" height="24" fill="white"></rect>
					</clipPath>
					</defs>
				</svg>
			</div>
			
			<div class="rounds-chart-detail">
				<h2>회진차트 작성</h2>
				<div class="rounds-chart-detail-inner-border">
					<h3>회진기록</h3>
					<textarea id="clinicOpinion" class="dduck-input"></textarea>
					
					<br><br><br>
					
					<div class="d-flex">
						<h3>검사오더</h3>
						<svg class="btn-order-modal" data-type="test" type="button" data-bs-toggle="modal" data-bs-target="#createOrderModal" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
							<g clip-path="url(#clip0_142_1638)">
							<path d="M18 13H13V18C13 18.55 12.55 19 12 19C11.45 19 11 18.55 11 18V13H6C5.45 13 5 12.55 5 12C5 11.45 5.45 11 6 11H11V6C11 5.45 11.45 5 12 5C12.55 5 13 5.45 13 6V11H18C18.55 11 19 11.45 19 12C19 12.55 18.55 13 18 13Z" fill="#8D9EA5"></path>
							</g>
							<defs>
							<clipPath id="clip0_142_1638">
							<rect width="24" height="24" fill="white"></rect>
							</clipPath>
							</defs>
						</svg>
						<img id="trashbinTest" class="icon-trashbin" src="/resources/images/icons/trashbin.png">
					</div>
					<table class="rounds-table test-order-table">
						<thead>
							<tr class="tr-padding tr-column">
								<th class="td-padding gray-text" style="width: 25%">검사명</th>
								<th class="td-padding gray-text" style="width: 60%">검사결과</th>
								<th class="td-padding gray-text" style="width: 15%">환부</th>
							</tr>
						</thead>
						<tbody>
							<tr class="tr-padding tr-data">
								<td class="td-padding-data gray-text" style="padding: 1%">진짜개아픈검사</td>
								<td class="td-padding-data gray-text">진짜몸에큰일이났음</td>
								<td class="td-padding-data gray-text">발바닥</td>
							</tr>
							<tr class="tr-padding tr-data">
								<td class="td-padding-data gray-text" style="padding: 1%">개재밌는검사</td>
								<td class="td-padding-data gray-text">괜츊함</td>
								<td class="td-padding-data gray-text">동공</td>
							</tr>
						</tbody>
					</table>
					
					<br><br>
					
					<div class="d-flex">
						<h3>처방오더</h3>
						<svg class="btn-order-modal" data-type="medicine" type="button" data-bs-toggle="modal" data-bs-target="#createOrderModal" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
							<g clip-path="url(#clip0_142_1638)">
							<path d="M18 13H13V18C13 18.55 12.55 19 12 19C11.45 19 11 18.55 11 18V13H6C5.45 13 5 12.55 5 12C5 11.45 5.45 11 6 11H11V6C11 5.45 11.45 5 12 5C12.55 5 13 5.45 13 6V11H18C18.55 11 19 11.45 19 12C19 12.55 18.55 13 18 13Z" fill="#8D9EA5"></path>
							</g>
							<defs>
							<clipPath id="clip0_142_1638">
							<rect width="24" height="24" fill="white"></rect>
							</clipPath>
							</defs>
						</svg>
						<img id="trashbinMedicine" class="icon-trashbin" src="/resources/images/icons/trashbin.png">
					</div>
					<table class="rounds-table medicine-order-table">
						<thead>
							<tr class="tr-padding tr-column">
								<th class="td-padding gray-text" style="width: 25%">약품명</th>
								<th class="td-padding gray-text" style="width: 30%">약품상세</th>
								<th class="td-padding gray-text" style="width: 30%">용법</th>
								<th class="td-padding gray-text" style="width: 15%">처방량</th>
							</tr>
						</thead>
						<tbody>
							<tr class="tr-padding tr-data">
								<td class="td-padding-data gray-text" style="padding: 1%">이부프로펜</td>
								<td class="td-padding-data gray-text">진자엄청아픈주사</td>
								<td class="td-padding-data gray-text">
									<input type="number" class="medicine-order-day">일 
									<input type="number" class="medicine-order-per">회 
									<input type="number" class="medicine-order-dose">정
								</td>
								<td class="td-padding-data gray-text">
									<input type="number" class="medicine-order-qt">일분
								</td>
							</tr>
						</tbody>
					</table>
					
					<br><br>
					
					<div class="d-flex">
						<h3>치료오더</h3>
						<svg class="btn-order-modal" data-type="treatment" type="button" data-bs-toggle="modal" data-bs-target="#createOrderModal" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
							<g clip-path="url(#clip0_142_1638)">
							<path d="M18 13H13V18C13 18.55 12.55 19 12 19C11.45 19 11 18.55 11 18V13H6C5.45 13 5 12.55 5 12C5 11.45 5.45 11 6 11H11V6C11 5.45 11.45 5 12 5C12.55 5 13 5.45 13 6V11H18C18.55 11 19 11.45 19 12C19 12.55 18.55 13 18 13Z" fill="#8D9EA5"></path>
							</g>
							<defs>
							<clipPath id="clip0_142_1638">
							<rect width="24" height="24" fill="white"></rect>
							</clipPath>
							</defs>
						</svg>
						<img id="trashbinTreatment" class="icon-trashbin" src="/resources/images/icons/trashbin.png">
					</div>
					
				</div>
			</div>
		</div>
	</div>
	<div class="dduk-body-border nurse-chart">
		<div class="dduk-title-area rounds-chart-head">
			<div class="d-flex align-items-center">
				<h2>간호 차트</h2>
			</div>
		</div>
	</div>
</div>

<script>
	$(function() {

		// 탭 css주는 부분
		$(document).on('click', '.rounds-tab', function() {
			// 자신에겐 tab-active를 제거, 다른 하나의 탭엔 tab-active 적용
			$(this).removeClass('tab-active');
			$('.rounds-tab').not(this).addClass('tab-active');
		});
		
		// 회진 날짜 클릭시 이벤트
		$(document).on('click', '.rounds-chart-list-date', function() {
			// 이전에 적용됐던 클릭시 효과를 지우고 방금 클릭한곳에 적용
			$('.rounds-chart-list-date').removeClass('selected');
			$(this).addClass('selected');
		});

		// 진료내역 클릭시 이벤트
		$(document).on('click', '.clinic-history-head', function() {
			// 이전에 적용됐던 클릭시 효과를 지우고 방금 클릭한곳에 적용
			$('.clinic-history-head').removeClass('selected');
			$(this).addClass('selected');
		});

		// 이름 등이 글자를 제어하고 싶을 때 maxLength까지만 표시
		function truncateText(text, maxLength) {
			if (text.length > maxLength) {
				return text.slice(0, maxLength) + '...';
			} else {
				return text;
			}
		}
	})
</script>